<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GGMaps - Animated Map Editor</title>
    <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<header>
    <div class="logo">
        <span>ğŸŒ GGMaps</span>
    </div>
    <div class="header-controls">
        <select id="styleSelect">
            <option value="liberty">Liberty</option>
            <option value="satellite">ğŸ›°ï¸ Satellite</option>
        </select>
        <label class="checkbox-label satellite-only" style="display:none">
            <input type="checkbox" id="showBorders"> Borders
        </label>
        <label class="checkbox-label satellite-only" style="display:none">
            <input type="checkbox" id="showLabels"> Labels
        </label>
        <button onclick="app.clearAll()">Clear Map</button>
        <button onclick="app.toggleFullscreen()">â›¶ Fullscreen</button>
    </div>
</header>

<main>
    <aside class="sidebar">
        <div class="toolbar">
            <button onclick="app.insertCommand('wait: 1s')" title="Add delay">â±ï¸ Wait</button>
            <button onclick="app.insertCommand('fly: 50, 10, 4')" title="Fly to location">âœˆï¸ Fly</button>
            <button onclick="app.insertCommand('zoom: Germany')" title="Zoom to country">ğŸ” Zoom</button>
            <div class="toolbar-divider"></div>
            <button onclick="app.insertCommand('bubble: 50, 10, &quot;Text&quot;, blue')" title="Add text bubble">ğŸ’¬ Bubble</button>
            <button onclick="app.insertCommand('year: &quot;2024&quot;')" title="Add year badge">ğŸ“… Year</button>
            <button onclick="app.insertCommand('arrow: 50, 10, &quot;Label&quot;, right')" title="Add arrow label">â¡ï¸ Arrow</button>
            <div class="toolbar-divider"></div>
            <button onclick="app.insertCommand('remove: last')" title="Remove last label">ğŸ—‘ï¸</button>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="editor">Editor</button>
            <button class="tab" data-tab="examples">Examples</button>
            <button class="tab" data-tab="help">Help</button>
        </div>

        <div class="tab-content active" id="tab-editor">
            <textarea class="editor" id="editor" placeholder="# Right-click on map to add countries
# Use toolbar to insert commands

germany: blue
france: green

bubble: 52, 13, &quot;Berlin&quot;, blue
wait: 2s
zoom: Germany"></textarea>
        </div>

        <div class="tab-content" id="tab-examples">
            <div class="examples-list" id="examplesList"></div>
        </div>

        <div class="tab-content" id="tab-help">
            <div class="help-content">
                <h3>ğŸ¨ Coloring Countries</h3>
                <p><code>country name: color</code></p>
                <p>Example: <code>germany: blue</code></p>

                <h3>ğŸ—ºï¸ Coloring Regions</h3>
                <p><code>region: Name, Country, color</code></p>
                <p>Example: <code>region: Bavaria, Germany, orange</code></p>

                <h3>ğŸ’¬ Text Bubble</h3>
                <p><code>bubble: lat, lng, "text", color</code></p>
                <p>Colors: blue, red, green, yellow, orange, purple, cyan</p>

                <h3>ğŸ“… Year Badge</h3>
                <p><code>year: "2024"</code></p>

                <h3>â¡ï¸ Arrow Label</h3>
                <p><code>arrow: lat, lng, "text", right</code></p>

                <h3>ğŸ¬ Animation</h3>
                <p><code>wait: 2s</code> - pause for 2 seconds</p>
                <p><code>fly: lat, lng, zoom</code> - fly to location</p>
                <p><code>zoom: Germany</code> - zoom to country</p>
                <p><code>remove: last</code> - remove last label</p>

                <h3>ğŸ’¡ Tips</h3>
                <p>â€¢ Right-click map to add countries/regions</p>
                <p>â€¢ Use DVD controls to step through animations</p>
                <p>â€¢ Current line highlights in blue while playing</p>
            </div>
        </div>

        <!-- ANIMATION CONTROLS - ALWAYS VISIBLE -->
        <div class="animation-controls-permanent">
            <!-- Progress bar -->
            <div class="timeline-container" id="timelineContainer">
                <div class="timeline-header">
                    <span class="timeline-title">Progress</span>
                    <span class="timeline-position" id="timelinePosition">0 / 0</span>
                </div>
                <div class="timeline-bar">
                    <div class="timeline-progress" id="timelineProgress"></div>
                </div>
            </div>

            <!-- DVD-style controls -->
            <div class="control-row">
                <button class="ctrl-btn" id="runBtn" onclick="app.run()" title="Run animation">â–¶ Run</button>
            </div>
            
            <div class="control-row dvd-controls" id="dvdControls" style="display: none;">
                <button class="ctrl-btn small" id="prevBtn" onclick="app.stepBackward()" title="Previous step">â®ï¸</button>
                <button class="ctrl-btn small stop" id="stopBtn" onclick="app.stop()" title="Stop">â¹</button>
                <button class="ctrl-btn small" id="playBtn" onclick="app.run()" title="Continue">â–¶ï¸</button>
                <button class="ctrl-btn small" id="nextBtn" onclick="app.stepForward()" title="Next step">â­ï¸</button>
            </div>
            
            <div class="control-row dvd-controls" id="dvdControls2" style="display: none;">
                <button class="ctrl-btn small secondary" onclick="app.restart()" title="Restart from beginning">ğŸ”„ Restart</button>
            </div>
        </div>
    </aside>

    <div class="map-container">
        <div id="map"></div>
        <div class="map-year-overlay" id="yearOverlay"></div>
        <div class="map-status" id="status">Loading...</div>
        <div class="map-attribution" id="attribution">
            <a href="https://openfreemap.org" target="_blank">OpenFreeMap</a> Â·
            <a href="https://naturalearthdata.com" target="_blank">Natural Earth</a>
        </div>
    </div>
</main>

<!-- Context Menu -->
<div class="context-menu" id="contextMenu">
    <div class="context-menu-header" id="menuTitle">Select</div>
    <div class="context-menu-section">Choose color</div>
    <div class="color-palette" id="colorPalette"></div>
    <div class="context-menu-divider"></div>
    <div class="context-menu-item" onclick="app.menu.addRegion()">
        <span class="icon">ğŸ¨</span> Color this region
    </div>
    <div class="context-menu-item" onclick="app.menu.addBubble()">
        <span class="icon">ğŸ’¬</span> Add text bubble here
    </div>
    <div class="context-menu-item" onclick="app.menu.addFly()">
        <span class="icon">âœˆï¸</span> Fly to this location
    </div>
    <div class="context-menu-divider"></div>
    <div class="context-menu-item" onclick="app.menu.close()">
        <span class="icon">âœ•</span> Cancel
    </div>
</div>

<!-- Scripts -->
<script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
<script src="js/config.js"></script>
<script src="js/examples.js"></script>
<script src="js/geodata.js"></script>
<script src="js/renderer.js"></script>
<script src="js/labels.js"></script>
<script src="js/parser.js"></script>
<script src="js/executor.js"></script>
<script src="js/editor.js"></script>
<script src="js/app.js"></script>

</body>
</html>