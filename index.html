<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pillars of Creation maps - Animated Map Editor</title>
    <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
    <link href="styles.css" rel="stylesheet" />
</head>
<body>
    <header>
        <div class="logo">ğŸŒ Pillars of Creation maps</div>
        <div class="header-controls">
            <select id="styleSelect">
                <option value="liberty">Liberty</option>
                <option value="satellite">ğŸ›°ï¸ Satellite</option>
            </select>
            <label class="checkbox-label satellite-only" style="display:none">
                <input type="checkbox" id="showBorders"> Borders
            </label>
            <label class="checkbox-label satellite-only" style="display:none">
                <input type="checkbox" id="showLabels"> Labels
            </label>
            <button onclick="app.clearAll()">Clear Map</button>
            <button onclick="app.toggleFullscreen()">â›¶ Fullscreen</button>
            <button onclick="app.startVideoRecording()" id="recordBtn">âº Record</button>
            <button onclick="app.stopVideoRecording()" id="stopBtn" style="display:none">â¹ Stop & Save</button>
        </div>
    </header>

    <div class="fixed-year" id="fixedYear"><span class="fixed-year-text"></span></div>

    <main>
        <aside class="sidebar">
            <div class="toolbar">
                <button onclick="app.insertCommand('wait: 1s')" title="Add delay">â±ï¸ Wait</button>
                <button onclick="app.insertCommand('fly: 50, 10, 4')" title="Fly to location">âœˆï¸ Fly</button>
                <button onclick="app.insertCommand('zoom: Germany')" title="Zoom to country">ğŸ” Zoom</button>
                <div class="toolbar-divider"></div>
                <button onclick="app.insertCommand('bubble: 50, 10, &quot;Text&quot;')" title="Add text bubble">ğŸ’¬ Bubble</button>
                <button onclick="app.insertCommand('year: &quot;2024&quot;')" title="Add year badge">ğŸ“… Year</button>
                <div class="toolbar-divider"></div>
                <button onclick="app.insertCommand('remove: last')" title="Remove last label">ğŸ—‘ï¸</button>
            </div>

            <div class="tabs">
                <button class="tab active" data-tab="editor">Editor</button>
                <button class="tab" data-tab="examples">Examples</button>
                <button class="tab" data-tab="help">Help</button>
            </div>

            <div class="tab-content active" id="tab-editor">
                <textarea class="editor" id="editor" placeholder="# Right-click on map to add countries
# Use toolbar to insert commands

germany: blue
france: green

bubble: 52, 13, &quot;Berlin&quot;
wait: 2s
zoom: Germany"></textarea>
            </div>

            <div class="tab-content" id="tab-examples">
                <div class="examples-list" id="examplesList"></div>
            </div>

            <div class="tab-content" id="tab-help">
                <div class="help-content">
                    <h3>ğŸ¨ Coloring Countries</h3>
                    <p><code>country name: color</code></p>
                    <p>Example: <code>germany: blue</code></p>

                    <h3>ğŸ—ºï¸ Coloring Regions</h3>
                    <p><code>region: Name, Country, color</code></p>
                    <p>Example: <code>region: Bavaria, Germany, orange</code></p>

                    <h3>ğŸ’¬ Text Bubble</h3>
                    <p><code>bubble: lat, lng, "text"</code></p>

                    <h3>ğŸ“… Year Badge</h3>
                    <p><code>year: "2024"</code></p>
                    <p><code>year: "2024", highlight</code></p>

                    <h3>ğŸ¬ Animation</h3>
                    <p><code>wait: 2s</code> - pause for 2 seconds</p>
                    <p><code>fly: lat, lng, zoom</code> - fly to location</p>
                    <p><code>zoom: Germany</code> - zoom to country</p>
                    <p><code>remove: last</code> - remove last label</p>

                    <h3>ğŸ’¡ Tips</h3>
                    <p>â€¢ Right-click map to add countries/regions</p>
                    <p>â€¢ Use toolbar buttons to insert commands</p>
                    <p>â€¢ Switch to Satellite for different look</p>

                    <h3>ğŸ¨ Available Colors</h3>
                    <p>red, orange, yellow, gold, green, blue, cyan, purple, pink, magenta, white, maroon, coral, salmon, navy, lime</p>
                </div>
            </div>

            <button class="run-btn primary" onclick="app.run()">â–¶ Run Animation</button>
        </aside>

        <div class="map-container">
            <div id="map"></div>
            <div class="map-status" id="status">Loading...</div>
            <div class="map-attribution" id="attribution">
                <a href="https://openfreemap.org" target="_blank">OpenFreeMap</a> Â·
                <a href="https://naturalearthdata.com" target="_blank">Natural Earth</a>
            </div>
        </div>
    </main>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-header" id="menuTitle">Select</div>
        <div class="context-menu-section">Choose color</div>
        <div class="color-palette" id="colorPalette"></div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" onclick="app.menu.addRegion()">
            <span class="icon">ğŸ¨</span> Color this region
        </div>
        <div class="context-menu-item" onclick="app.menu.addBubble()">
            <span class="icon">ğŸ’¬</span> Add text bubble here
        </div>
        <div class="context-menu-item" onclick="app.menu.addFly()">
            <span class="icon">âœˆï¸</span> Fly to this location
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" onclick="app.menu.close()">
            <span class="icon">âœ•</span> Cancel
        </div>
    </div>

    <!-- Dependencies -->
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    
    <!-- App Scripts -->
    <script src="js/config.js"></script>
    <script src="js/examples.js"></script>
    <script src="js/GeoData.js"></script>
    <script src="js/MapRenderer.js"></script>
    <script src="js/LabelFactory.js"></script>
    <script src="js/ScriptParser.js"></script>
    <script src="js/ScriptExecutor.js"></script>
    <script src="js/Editor.js"></script>
    <script src="js/ContextMenu.js"></script>
    <script src="js/App.js"></script>
    <script src="js/main.js"></script>
</body>
</html>